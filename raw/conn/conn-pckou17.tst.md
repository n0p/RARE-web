# Example: ppp with packet over dtls

## **Topology diagram**

![topology](/img/conn-pckou17.tst.png)

## **Configuration**

**r1:**
```
hostname r1
buggy
!
logging file debug ../binTmp/zzz94r1-log.run
!
crypto rsakey rsa import $v10$TUlJRW93SUJBQUtDQVFFQXBDMHlkdVlWZ2Vva2JJejNqK0ZRRGdjNXBDUVBUNUdJdTNEdUJQYjFTZ0JKQ0l1TkxzS0NhWTN0Ky91dGZjMGxvM0wwdFp0STl4OFk0bzBhZlQ4VHduZi8zYVFqbXY2VHRKQks4VlkwalNvNmJ6dmloWkRXdVd0aXdkZmZuVjNNZHE0aFdvQ3dkTC94ai91dlkydWJWZGt6VE92LytxUVBFbnVncXY5NTNWRE04cmZwUENCNmlHclJaNll6c1lTWiszb3FFZ2xXVUNVS3gwaEUxUVlESmM3OXd0N0Z3WTlBVjBodFp5M0M2cFJJVmpWKzVQbDZBZC8zTEowc3crMnhidTdOQUxIcFpWdTVJUW9OWXBuZE9nSGFHWlVTcWtDVkIvY3pvU2FxaTJIVUVkeDlvN1k1NFlWeTd1Y0s5NzNXKzdzOFhwNWZGUW1sMGg2a1NoWlFDd0lEQVFBQkFvSUJBR1hoT2tpNFhTNWllem4xZkljSHZlTUdyc2xpS3pJb1VONW9wUHZsdUsrMFg1M3k0Nmpad1kzNUttN05ib3I3ckZpeXRKS2lDM1IzRXIwNzdPMCtJR2YwaVk0a0ZvaFBaSitQVDBKV1NZUTBhVkN2cTlGUTRUN3RHYnJLMkpSU0tkaVlGRkNTUFc0bDBxU1QvZkhIUy96SkxXR1ZyaUwrZmUvdFVmWHJWZGQxRnhjaU1Cc1Z3TGJvR1VuTjBqSGpTQllqc091NFNlTVc5T25tM2pHUlJFRTFGQXhXSjlsMVFqbmtReFJSWk52c2N2OTVPWkVZQldBaFpjS205OVhSSnJUZnBPNU5hdFpjK09WcC9GVnk3L1NlSUIwNW1PdGtFQ3lvb2lRR3hVT0laM2VVOG5SVWl3M0JFbzJZN0d5RHJ3MXJlL0tHNkNOUkJxcC9ZWjdTcFRrQ2dZRUExbVlGTjNGMkVvUWVIbUZGRFVJTW84VGp3TFgwMHQ1YVBFVkRXTkpBSHBxL2h6RDg4czRrM3Vwd2Fub0tnaUpBZ09abmxsMWJ0L01NNjlKaldOOUFWM0dtUDBRaG5nVE10cFNBWHJHZWM3V0FjczJ5WjJIY1pDVmVvOGRCdmNNeE5yV0liQmV6bDVmeXlYWTFqNFJFb0FkeGwrQ2ZlSnlFaE8rNXBkN05VVFVDZ1lFQXhBaDJqQVBzWHJXRUhFcktNa3BMbHlkc3lsMXplTWRqaVJQNFVieXc1UW1aNEV5MjVpOERacUxoZ3FZYTU3ZHVKNGhOVHBKTGNHT2xyZEdoMVJKZFJFd3hHMmZvK1QwZTNKQnZYQVVnMGJST25QTk8xSkhtdHZpQ1V1MDdjQkFTUjhwUjJrSTJBK3hGa1pEeG9CUEphWUdwNldUa3JiZFhIdFhVZDE3d2hEOENnWUFmbTc3ZEk2OGluN1BKQ3RJaFdFR0F5NEJBWXhNTEc1ajJGY2dPQ2tGRndjN0c0YVFKTC9jam5qQ2dvZ2wya2hJc2JzdUswWXk2RyswbHYwakNTM2V5N0tCejUxbUZjSE8xMzBMbHN3NEhSUlVBMSs2YmEwUVF4Nm1pUDdnamYrbDdoVnZ0ZzdrSWVuQmkzemlhUmdmUUNBanBPVWFKZzVuTjk0SEpRSVhJbVFLQmdCRGpZY01pTzJUVlluSkZoekhaOExVdThsSmt4cVByR1lvZnJFN3VZSmI2d3NUdUZ2dXhwU3RjY08wZWZrYmtLSnREUk5XMkNNVy83L0FQbFUrVDYzRU0xMVl6RjRFUllPMURqRFJ6UkthTVVCRjViSnNuanFiSXRnR0s2b24yK0h3eTArWm51ZHVRcVZXbkZRbmphb0NxYVFid2FEc0hCbnhqazVCTkg0OWxBb0dCQUxSSklidGd4aWoyTXFwZVdLd2d6RjJhdjl3ZHVZaW5tdmFZejEwNXV5S0o0by9tK3dldDBQaGI4aEZRUmJFZkY2cUR3TDhyM2dYNDd1UFMvNzNtbkwybmNHZys4eGdxUDkwdVhXMXk5cVhZRWV3dU1MQ1pHZDhPMlJXS2ZDZmtYc0Q2cmVkOGVsa2ZPY3JsNjA0MVJ1TkQvVFdxaFVYNGFDaXVmb3dsVU1QTw==
!
crypto dsakey dsa import $v10$TUlJQnVnSUJBQUtCZ0JpeXBMSFBRYTJnZ0o1ZkJ0dnhDaWdCSGRHQVJ2cUJIalFNUGd4K3VQYzlqdC9oV0l2Y2tiR3B4eXVpZmgxeFZKZ2I5RG9tUDQ2SFR3Yk5Hc2k5RkdaaW1mMW9FcVc2TXhRNHRCRHUvMnFCeHMxbk94L3NmRHZOU3dxdUVIUkx5eTJhNE53SUY0UnNNUlZUbkxHTW1SQndhNDBGdVhxbk1PczJlWHZxS1laSEFoVUF2TTlWN3hTY0MreUMxVnU5QmNVMmRFUWphMmtDZ1lBRGRoQ0hQd0RtemlUakVEUysxY2Q0ak80VWlOaWdkUFpuZjlPVjlxa0J4SXFQTGMxNmJDV2RqdnRHQjdDb3FGMWVtMnJQeGE2MXMzM1NWN1QwSCs4WFdNQVJvejRCKzd5dnJneGNFbEQzT3hIQVZRVC9LUEtYb0FIbXhCdERxeC8wK2ttdUtpWlhYNlJ5N09YbjFNeUpKRjNGNDdoUWVYRzFkZDY5WXltU2lBS0JnQTJQa0RvUlN1a3FxaytITmZSTGVreXZiSUgvR3hndm0yS0lMU2NDTWlRcnY5ZEpkeitoeWJBYkZReDZDZElLeSszYThiUzVHL2d4U0JhTUF1T3dnL0lnTWFDRktJdlZnSWFlU2lLVndaSmRtNzBqZUdWRVBQR1JWMmhKMm9aeGZQTytid2xsOGxLbGVnYTBpSnZpdlFmZDBnOWJlT29NN2MyM0Z5RTJCZEkyQWhVQTRGblJLUDZZa2tralk2VUdnd0hLY1dhS3ozWT0=
!
crypto ecdsakey ecdsa import $v10$TUhNQ0FRRUVIeFpiSVplRllPcW8zY0xoNDNTM0lJL3dKcmxMTEhIQ3dCNUYzQjJIUVlTZ0J3WUZLNEVFQUFxaFJBTkNBQVN4NkJUMys5YzdGWTlHS0wrMHNuT3Q0dkNYbXM4QzJiL3pOSzdNL1Y1QlZBWVN5ckVzN1loM21TQXlLQ29DQ0VOcTFOb2phUHkrbUt0dW03RC9ZaXVr
!
crypto certificate dsa import dsa dsa $v10$TUlJQ1VqQ0NBZytnQXdJQkFnSUVja205eHpBTEJnY3Foa2pPT0FRREJRQXdEVEVMTUFrR0ExVUVBeE1DY2pFd0hoY05NakV3T0RFM01EZzFOak14V2hjTk16RXdPREUxTURnMU5qTXhXakFOTVFzd0NRWURWUVFERXdKeU1UQ0NBYlV3Z2dFcUJnY3Foa2pPT0FRQk1JSUJIUUtCZ0JpeXBMSFBRYTJnZ0o1ZkJ0dnhDaWdCSGRHQVJ2cUJIalFNUGd4K3VQYzlqdC9oV0l2Y2tiR3B4eXVpZmgxeFZKZ2I5RG9tUDQ2SFR3Yk5Hc2k5RkdaaW1mMW9FcVc2TXhRNHRCRHUvMnFCeHMxbk94L3NmRHZOU3dxdUVIUkx5eTJhNE53SUY0UnNNUlZUbkxHTW1SQndhNDBGdVhxbk1PczJlWHZxS1laSEFoVUF2TTlWN3hTY0MreUMxVnU5QmNVMmRFUWphMmtDZ1lBRGRoQ0hQd0RtemlUakVEUysxY2Q0ak80VWlOaWdkUFpuZjlPVjlxa0J4SXFQTGMxNmJDV2RqdnRHQjdDb3FGMWVtMnJQeGE2MXMzM1NWN1QwSCs4WFdNQVJvejRCKzd5dnJneGNFbEQzT3hIQVZRVC9LUEtYb0FIbXhCdERxeC8wK2ttdUtpWlhYNlJ5N09YbjFNeUpKRjNGNDdoUWVYRzFkZDY5WXltU2lBT0JoQUFDZ1lBTmo1QTZFVXJwS3FwUGh6WDBTM3BNcjJ5Qi94c1lMNXRpaUMwbkFqSWtLNy9YU1hjL29jbXdHeFVNZWduU0NzdnQydkcwdVJ2NE1VZ1dqQUxqc0lQeUlER2doU2lMMVlDR25rb2lsY0dTWFp1OUkzaGxSRHp4a1Zkb1NkcUdjWHp6dm04SlpmSlNwWG9HdElpYjRyMEgzZElQVzNqcURPM050eGNoTmdYU05qQUxCZ2NxaGtqT09BUURCUUFETUFBQU1Dd0NGR1FCQVlLVWh4NGk3TDVhYS9ka0tkYSs5RFk3QWhRcmVPY3ZJZkNsaHRzL0x6cHRGTE4xUm0wNm1BPT0=
!
crypto certificate ecdsa import ecdsa ecdsa $v10$TUlJQlREQ0JzS0FEQWdFQ0FnUitYMVk5TUF3R0NDcUdTTTQ5QkFNQ0JRQXdEVEVMTUFrR0ExVUVBeE1DY2pFd0hoY05NakV3T0RFM01EZzFOak14V2hjTk16RXdPREUxTURnMU5qTXhXakFOTVFzd0NRWURWUVFERXdKeU1UQlhNQkFHQnlxR1NNNDlBZ0VHQlN1QkJBQUtBME1BQUFTeDZCVDMrOWM3Rlk5R0tMKzBzbk90NHZDWG1zOEMyYi96Tks3TS9WNUJWQVlTeXJFczdZaDNtU0F5S0NvQ0NFTnExTm9qYVB5K21LdHVtN0QvWWl1a01Bd0dDQ3FHU000OUJBTUNCUUFEZ1lnQUFEQ0Jnd0lnZldQZE9Qb09YT2tOQ0ZmaldOTXlocFVBVXBBaWEwZmkwdmdPWi9XQzhXd0NYd09HcVlWL1ptREF6N0hSTXpUNVBGbUluaXBLQmlscTZSOURhWW9WbmF6VVJLaWFLZ3Faa0JuNXZIYzVmaVZuWGUzemkzbjB3Q2RLcUcySHZneVV6SUVPc0xYM3M0WEVZNm0reDJYQVRydkV0QUpjeXFzNGdwSStnMkFUMEJ1bA==
!
crypto certificate rsa import rsa rsa $v10$TUlJQ2xqQ0NBWDZnQXdJQkFnSUVZb3ZPN3pBTkJna3Foa2lHOXcwQkFRc0ZBREFOTVFzd0NRWURWUVFERXdKeU1UQWVGdzB5TVRBNE1UY3dPRFUyTXpGYUZ3MHpNVEE0TVRVd09EVTJNekZhTUEweEN6QUpCZ05WQkFNVEFuSXhNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQXBDMHlkdVlWZ2Vva2JJejNqK0ZRRGdjNXBDUVBUNUdJdTNEdUJQYjFTZ0JKQ0l1TkxzS0NhWTN0Ky91dGZjMGxvM0wwdFp0STl4OFk0bzBhZlQ4VHduZi8zYVFqbXY2VHRKQks4VlkwalNvNmJ6dmloWkRXdVd0aXdkZmZuVjNNZHE0aFdvQ3dkTC94ai91dlkydWJWZGt6VE92LytxUVBFbnVncXY5NTNWRE04cmZwUENCNmlHclJaNll6c1lTWiszb3FFZ2xXVUNVS3gwaEUxUVlESmM3OXd0N0Z3WTlBVjBodFp5M0M2cFJJVmpWKzVQbDZBZC8zTEowc3crMnhidTdOQUxIcFpWdTVJUW9OWXBuZE9nSGFHWlVTcWtDVkIvY3pvU2FxaTJIVUVkeDlvN1k1NFlWeTd1Y0s5NzNXKzdzOFhwNWZGUW1sMGg2a1NoWlFDd0lEQVFBQk1BMEdDU3FHU0liM0RRRUJDd1VBQTRJQkFRQlRPSDBmUHdsbnRQVEE1Z3BzZEVXWTlBQmdTdkRTeC96WHZIYTdUWUJrL2NsTFh0L0VHZzQxbVQvQWIxKzNRZUNXOHArbWMyV2ZQSG5Oek1iT2pMbHJBaVNzTHE5VlczWGhkNTdZcWlWZjgwdG9zL28rNlMvMmNxZlU3M1dkWHdOUGs3ZDQ4aU1ZaTVvcm9TNHNXZkQ3U2MvM1VvMmhpR05XRXY4QzJYNTRpbW44K0tmSzNuYW8zTDY4RUVPSU0vM2xkYUJvRTd1MVZyK0JONkF5WmJTVWFQQWNsMXAwV2RldXBDczZNQU8ybXFBVkE2SWFkWGtRemNKeTFwaGI3M05JZW5VVmVkVi9hL2Jmd0ZXa0ZNWmI0RzdEYXlGdEFpeTRFT0c5bzFGRTJPWTAvT29KQmQySDJjOXM5SU1keTAzcGN1VEVHMlIrNlREWkJhNC9pNjlU
!
ipv4 pool p4 2.2.2.1 0.0.0.1 254
!
vrf definition tester
 exit
!
vrf definition v1
 rd 1:1
 exit
!
interface loopback0
 no description
 vrf forwarding v1
 ipv4 address 4.4.4.4 255.255.255.255
 no shutdown
 no log-link-change
 exit
!
interface dialer1
 no description
 encapsulation ppp
 ppp ip4cp open
 ppp ip4cp local 2.2.2.0
 vrf forwarding v1
 ipv4 address 2.2.2.0 255.255.255.255
 ipv4 pool p4
 no shutdown
 no log-link-change
 exit
!
interface serial1
 no description
 encapsulation hdlc
 vrf forwarding v1
 ipv4 address 1.1.1.1 255.255.255.0
 ipv6 address 1234::1 ffff::
 no shutdown
 no log-link-change
 exit
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
server telnet tester
 security protocol telnet
 no exec authorization
 no login authentication
 vrf tester
 exit
!
server dns dns
 zone test.corp defttl 43200
 zone test.corp axfr enable
 zone test.corp rr www.test.corp ip4a 1.1.1.1
 vrf v1
 exit
!
server pckodtls pou
 security protocol dtls
 security rsakey rsa
 security dsakey dsa
 security ecdsakey ecdsa
 security rsacert rsa
 security dsacert dsa
 security ecdsacert ecdsa
 clone dialer1
 vrf v1
 exit
!
!
end
```

**r2:**
```
hostname r2
buggy
!
logging file debug ../binTmp/zzz94r2-log.run
!
prefix-list p1
 sequence 10 permit 0.0.0.0/0 ge 0 le 0
 exit
!
vrf definition tester
 exit
!
vrf definition v1
 rd 1:1
 exit
!
interface dialer1
 no description
 encapsulation ppp
 ppp ip4cp open
 ppp ip4cp local 0.0.0.0
 vrf forwarding v1
 ipv4 address 3.3.3.3 255.255.255.128
 ipv4 gateway-prefix p1
 no shutdown
 no log-link-change
 exit
!
interface serial1
 no description
 encapsulation hdlc
 vrf forwarding v1
 ipv4 address 1.1.1.2 255.255.255.0
 ipv6 address 1234::2 ffff::
 no shutdown
 no log-link-change
 exit
!
proxy-profile p1
 security dtls
 vrf v1
 exit
!
proxy-profile p2
 vrf v1
 exit
!
vpdn pou
 interface dialer1
 proxy p1
 target www.test.corp
 vcid 2554
 protocol pckodtls
 exit
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
server telnet tester
 security protocol telnet
 no exec authorization
 no login authentication
 vrf tester
 exit
!
client proxy p2
client name-server 1.1.1.1
!
end
```
